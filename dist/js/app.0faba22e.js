(function(){"use strict";var e={6730:function(e,n,r){var t=r(9963),o=r(6252);function a(e,n){const r=(0,o.up)("router-vuew");return(0,o.wg)(),(0,o.j4)(r)}var s=r(3744);const i={},u=(0,s.Z)(i,[["render",a]]);var l=u,c=r(2201),p=r(3577);const m=(0,o._)("h2",{class:"form__title"},"Login",-1),d={class:"button__wrapper"},g=(0,o._)("button",{type:"submit",class:"btn btn-success",id:"login_button"},"Sign in",-1),f={class:"error__wrapper"};function v(e,n,r,a,s,i){return(0,o.wg)(),(0,o.iD)("form",{onSubmit:n[3]||(n[3]=(0,t.iM)(((...e)=>a.login&&a.login(...e)),["prevent"])),class:"container"},[m,(0,o.wy)((0,o._)("input",{id:"email",type:"email",class:"form__control",name:"email",value:"",required:"",autofocus:"","onUpdate:modelValue":n[0]||(n[0]=e=>a.email=e),placeholder:"Email"},null,512),[[t.nr,a.email]]),(0,o.wy)((0,o._)("input",{id:"password",type:"password",class:"form__control",name:"password",required:"","onUpdate:modelValue":n[1]||(n[1]=e=>a.password=e),placeholder:"Password"},null,512),[[t.nr,a.password]]),(0,o._)("div",d,[(0,o._)("button",{onClick:n[2]||(n[2]=(0,t.iM)(((...e)=>a.register&&a.register(...e)),["prevent"])),class:"btn btn-second"},"Register"),g]),(0,o._)("div",f,(0,p.zw)(a.error),1)],32)}r(7658);var w=r(2262),_=r(3907),h={name:"LoginComponent",setup(){const e=(0,w.iH)(""),n=(0,w.iH)(""),r=(0,w.iH)(null),t=(0,_.oR)(),o=(0,c.tv)(),a=async()=>{try{await t.dispatch("login",{email:e.value,password:n.value}),o.push("/")}catch(a){r.value=a.message}},s=()=>{o.push("/register")};return{login:a,email:e,password:n,error:r,register:s}}};const b=(0,s.Z)(h,[["render",v]]);var y=b;const E=(0,o._)("h2",{class:"form__title"},"Register",-1),S={class:"button__wrapper"},O=(0,o._)("button",{type:"submit",id:"register_button",class:"btn btn-success"},"Register",-1),k={class:"error__wrapper"};function U(e,n,r,a,s,i){return(0,o.wg)(),(0,o.iD)("form",{onSubmit:n[4]||(n[4]=(0,t.iM)(((...e)=>a.register&&a.register(...e)),["prevent"])),class:"container"},[E,(0,o.wy)((0,o._)("input",{id:"name",type:"name",class:"form__control",name:"name",value:"",required:"",autofocus:"","onUpdate:modelValue":n[0]||(n[0]=e=>a.name=e),placeholder:"Name"},null,512),[[t.nr,a.name]]),(0,o.wy)((0,o._)("input",{id:"email",type:"email",class:"form__control",name:"email",value:"",required:"",autofocus:"","onUpdate:modelValue":n[1]||(n[1]=e=>a.email=e),placeholder:"Email"},null,512),[[t.nr,a.email]]),(0,o.wy)((0,o._)("input",{id:"password",type:"password",class:"form__control",name:"password",required:"","onUpdate:modelValue":n[2]||(n[2]=e=>a.password=e),placeholder:"Password"},null,512),[[t.nr,a.password]]),(0,o._)("div",S,[(0,o._)("button",{onClick:n[3]||(n[3]=(0,t.iM)(((...e)=>a.signIn&&a.signIn(...e)),["prevent"])),class:"btn btn-second"},"Sign in"),O]),(0,o._)("div",k,(0,p.zw)(a.error),1)],32)}var R={name:"RegisterComponent",setup(){const e=(0,w.iH)(""),n=(0,w.iH)(""),r=(0,w.iH)(""),t=(0,w.iH)(null),o=(0,_.oR)(),a=(0,c.tv)(),s=async()=>{try{await o.dispatch("register",{name:e.value,email:n.value,password:r.value}),a.push("/")}catch(s){console.log(s),t.value=s.message}},i=()=>{a.push("/login")};return{register:s,name:e,email:n,password:r,error:t,signIn:i}}};const T=(0,s.Z)(R,[["render",U]]);var I=T;const C={key:0,class:"container"},H=(0,o._)("div",null,"You are logged in!",-1),j={key:1,class:"container",role:"alert"},D=(0,o._)("h2",null,"You are not logged in!",-1);function q(e,n,r,a,s,i){return a.user.authorized?((0,o.wg)(),(0,o.iD)("div",C,[(0,o._)("h2",null,"Welcome, "+(0,p.zw)(a.user.data.displayName),1),H,(0,o._)("button",{onClick:n[0]||(n[0]=(0,t.iM)(((...e)=>a.signOut&&a.signOut(...e)),["prevent"])),class:"btn btn-second"},"Log Out")])):((0,o.wg)(),(0,o.iD)("div",j,[D,(0,o._)("button",{onClick:n[1]||(n[1]=(0,t.iM)(((...e)=>a.logIn&&a.logIn(...e)),["prevent"])),class:"btn btn-second"},"Log In")]))}var z=r(5503),M=r(5243);const V={apiKey:"AIzaSyCVTADaHXrwtmEehBTsOl0kVfoqOqrKi5A",authDomain:"uprock-app-auth.firebaseapp.com",projectId:"uprock-app-auth",storageBucket:"uprock-app-auth.appspot.com",messagingSenderId:"313047677410",appId:"1:313047677410:web:fa646696f497d888f2a1bb"},Z=((0,z.ZF)(V),(0,M.v0)());var A={name:"UserComponent",setup(){const e=(0,_.oR)(),n=(0,c.tv)();Z.onAuthStateChanged((n=>{e.dispatch("fetchUser",n)}));const r=(0,o.Fl)((()=>e.getters.user)),t=async()=>{await e.dispatch("logout"),n.push("/")},a=async()=>{n.push("/login")};return console.log(r),{user:r,signOut:t,logIn:a}}};const L=(0,s.Z)(A,[["render",q]]);var N=L;const P=[{path:"/login",name:"login",component:y},{path:"/register",name:"register",component:I},{path:"/",name:"user",component:N}],x=(0,c.p7)({history:(0,c.PO)(),routes:P});var F=x;const B=(0,_.MT)({state:{user:{authorized:!1,data:null}},getters:{user(e){return e.user}},mutations:{SET_USER(e,n){e.user.data=n},SET_AUTHORIZED(e,n){e.user.authorized=n}},actions:{async register(e,{email:n,password:r,name:t}){const o=await(0,M.Xb)(Z,n,r);if(!o)throw new Error("Unable to register user");console.log(o.user),e.commit("SET_USER",o.user),o.user.displayName=t},async login(e,{email:n,password:r}){const t=await(0,M.e5)(Z,n,r);if(!t)throw new Error("Login failed");e.commit("SET_USER",t.user)},async logout(e){await(0,M.w7)(Z),e.commit("SET_USER",null)},async fetchUser(e,n){e.commit("SET_AUTHORIZED",null!==n),n?e.commit("SET_USER",{displayName:n.displayName,email:n.email}):e.commit("SET_USER",null)}}});var K=B;(0,t.ri)(l).use(F).use(K).mount("#app")}},n={};function r(t){var o=n[t];if(void 0!==o)return o.exports;var a=n[t]={exports:{}};return e[t](a,a.exports,r),a.exports}r.m=e,function(){var e=[];r.O=function(n,t,o,a){if(!t){var s=1/0;for(c=0;c<e.length;c++){t=e[c][0],o=e[c][1],a=e[c][2];for(var i=!0,u=0;u<t.length;u++)(!1&a||s>=a)&&Object.keys(r.O).every((function(e){return r.O[e](t[u])}))?t.splice(u--,1):(i=!1,a<s&&(s=a));if(i){e.splice(c--,1);var l=o();void 0!==l&&(n=l)}}return n}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[t,o,a]}}(),function(){r.d=function(e,n){for(var t in n)r.o(n,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={143:0};r.O.j=function(n){return 0===e[n]};var n=function(n,t){var o,a,s=t[0],i=t[1],u=t[2],l=0;if(s.some((function(n){return 0!==e[n]}))){for(o in i)r.o(i,o)&&(r.m[o]=i[o]);if(u)var c=u(r)}for(n&&n(t);l<s.length;l++)a=s[l],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(c)},t=self["webpackChunkuprock_spa_vue"]=self["webpackChunkuprock_spa_vue"]||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))}();var t=r.O(void 0,[998],(function(){return r(6730)}));t=r.O(t)})();
//# sourceMappingURL=app.0faba22e.js.map