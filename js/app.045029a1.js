(function(){"use strict";var e={1002:function(e,n,r){var t=r(9963),o=r(6252),a=r(2262),s=r(2201),i={__name:"App",setup(e){return(e,n)=>((0,o.wg)(),(0,o.j4)((0,a.SU)(s.MA)))}};const u=i;var l=u,c=r(3577);const p=(0,o._)("h2",{class:"form__title"},"Login",-1),m={class:"button__wrapper"},d=(0,o._)("button",{type:"submit",class:"btn btn-success",id:"login_button"},"Sign in",-1),g={class:"error__wrapper"};function f(e,n,r,a,s,i){return(0,o.wg)(),(0,o.iD)("form",{onSubmit:n[3]||(n[3]=(0,t.iM)(((...e)=>a.login&&a.login(...e)),["prevent"])),class:"container"},[p,(0,o.wy)((0,o._)("input",{id:"email",type:"email",class:"form__control",name:"email",value:"",required:"",autofocus:"","onUpdate:modelValue":n[0]||(n[0]=e=>a.email=e),placeholder:"Email"},null,512),[[t.nr,a.email]]),(0,o.wy)((0,o._)("input",{id:"password",type:"password",class:"form__control",name:"password",required:"","onUpdate:modelValue":n[1]||(n[1]=e=>a.password=e),placeholder:"Password"},null,512),[[t.nr,a.password]]),(0,o._)("div",m,[(0,o._)("button",{onClick:n[2]||(n[2]=(0,t.iM)(((...e)=>a.register&&a.register(...e)),["prevent"])),class:"btn btn-second"},"Register"),d]),(0,o._)("div",g,(0,c.zw)(a.error),1)],32)}r(7658);var v=r(3907),_={name:"LoginComponent",setup(){const e=(0,a.iH)(""),n=(0,a.iH)(""),r=(0,a.iH)(null),t=(0,v.oR)(),o=(0,s.tv)(),i=async()=>{try{await t.dispatch("login",{email:e.value,password:n.value}),o.push("/")}catch(a){r.value=a.message}},u=()=>{o.push("/register")};return{login:i,email:e,password:n,error:r,register:u}}},w=r(3744);const h=(0,w.Z)(_,[["render",f]]);var b=h;const y=(0,o._)("h2",{class:"form__title"},"Register",-1),E={class:"button__wrapper"},S=(0,o._)("button",{type:"submit",id:"register_button",class:"btn btn-success"},"Register",-1),O={class:"error__wrapper"};function k(e,n,r,a,s,i){return(0,o.wg)(),(0,o.iD)("form",{onSubmit:n[4]||(n[4]=(0,t.iM)(((...e)=>a.register&&a.register(...e)),["prevent"])),class:"container"},[y,(0,o.wy)((0,o._)("input",{id:"name",type:"name",class:"form__control",name:"name",value:"",required:"",autofocus:"","onUpdate:modelValue":n[0]||(n[0]=e=>a.name=e),placeholder:"Name"},null,512),[[t.nr,a.name]]),(0,o.wy)((0,o._)("input",{id:"email",type:"email",class:"form__control",name:"email",value:"",required:"",autofocus:"","onUpdate:modelValue":n[1]||(n[1]=e=>a.email=e),placeholder:"Email"},null,512),[[t.nr,a.email]]),(0,o.wy)((0,o._)("input",{id:"password",type:"password",class:"form__control",name:"password",required:"","onUpdate:modelValue":n[2]||(n[2]=e=>a.password=e),placeholder:"Password"},null,512),[[t.nr,a.password]]),(0,o._)("div",E,[(0,o._)("button",{onClick:n[3]||(n[3]=(0,t.iM)(((...e)=>a.signIn&&a.signIn(...e)),["prevent"])),class:"btn btn-second"},"Sign in"),S]),(0,o._)("div",O,(0,c.zw)(a.error),1)],32)}var U={name:"RegisterComponent",setup(){const e=(0,a.iH)(""),n=(0,a.iH)(""),r=(0,a.iH)(""),t=(0,a.iH)(null),o=(0,v.oR)(),i=(0,s.tv)(),u=async()=>{try{await o.dispatch("register",{name:e.value,email:n.value,password:r.value}),i.push("/")}catch(a){console.log(a),t.value=a.message}},l=()=>{i.push("/login")};return{register:u,name:e,email:n,password:r,error:t,signIn:l}}};const R=(0,w.Z)(U,[["render",k]]);var T=R;const I={key:0,class:"container"},C=(0,o._)("div",null,"You are logged in!",-1),H={key:1,class:"container",role:"alert"},j=(0,o._)("h2",null,"You are not logged in!",-1);function A(e,n,r,a,s,i){return a.user.authorized?((0,o.wg)(),(0,o.iD)("div",I,[(0,o._)("h2",null,"Welcome, "+(0,c.zw)(a.user.data.displayName),1),C,(0,o._)("button",{onClick:n[0]||(n[0]=(0,t.iM)(((...e)=>a.signOut&&a.signOut(...e)),["prevent"])),class:"btn btn-second"},"Log Out")])):((0,o.wg)(),(0,o.iD)("div",H,[j,(0,o._)("button",{onClick:n[1]||(n[1]=(0,t.iM)(((...e)=>a.logIn&&a.logIn(...e)),["prevent"])),class:"btn btn-second"},"Log In")]))}var D=r(5503),M=r(5243);const q={apiKey:"AIzaSyCVTADaHXrwtmEehBTsOl0kVfoqOqrKi5A",authDomain:"uprock-app-auth.firebaseapp.com",projectId:"uprock-app-auth",storageBucket:"uprock-app-auth.appspot.com",messagingSenderId:"313047677410",appId:"1:313047677410:web:fa646696f497d888f2a1bb"},z=((0,D.ZF)(q),(0,M.v0)());var V={name:"UserComponent",setup(){const e=(0,v.oR)(),n=(0,s.tv)();z.onAuthStateChanged((n=>{e.dispatch("fetchUser",n)}));const r=(0,o.Fl)((()=>e.getters.user)),t=async()=>{await e.dispatch("logout"),n.push("/")},a=async()=>{n.push("/login")};return console.log(r),{user:r,signOut:t,logIn:a}}};const Z=(0,w.Z)(V,[["render",A]]);var L=Z;const N=[{path:"/login",name:"login",component:b},{path:"/register",name:"register",component:T},{path:"/",name:"user",component:L}],P=(0,s.p7)({history:(0,s.PO)(),routes:N});var x=P;const F=(0,v.MT)({state:{user:{authorized:!1,data:null}},getters:{user(e){return e.user}},mutations:{SET_USER(e,n){e.user.data=n},SET_AUTHORIZED(e,n){e.user.authorized=n}},actions:{async register(e,{email:n,password:r,name:t}){const o=await(0,M.Xb)(z,n,r);if(!o)throw new Error("Unable to register user");console.log(o.user),e.commit("SET_USER",o.user),o.user.displayName=t},async login(e,{email:n,password:r}){const t=await(0,M.e5)(z,n,r);if(!t)throw new Error("Login failed");e.commit("SET_USER",t.user)},async logout(e){await(0,M.w7)(z),e.commit("SET_USER",null)},async fetchUser(e,n){e.commit("SET_AUTHORIZED",null!==n),n?e.commit("SET_USER",{displayName:n.displayName,email:n.email}):e.commit("SET_USER",null)}}});var B=F;(0,t.ri)(l).use(x).use(B).mount("#app")}},n={};function r(t){var o=n[t];if(void 0!==o)return o.exports;var a=n[t]={exports:{}};return e[t](a,a.exports,r),a.exports}r.m=e,function(){var e=[];r.O=function(n,t,o,a){if(!t){var s=1/0;for(c=0;c<e.length;c++){t=e[c][0],o=e[c][1],a=e[c][2];for(var i=!0,u=0;u<t.length;u++)(!1&a||s>=a)&&Object.keys(r.O).every((function(e){return r.O[e](t[u])}))?t.splice(u--,1):(i=!1,a<s&&(s=a));if(i){e.splice(c--,1);var l=o();void 0!==l&&(n=l)}}return n}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[t,o,a]}}(),function(){r.d=function(e,n){for(var t in n)r.o(n,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={143:0};r.O.j=function(n){return 0===e[n]};var n=function(n,t){var o,a,s=t[0],i=t[1],u=t[2],l=0;if(s.some((function(n){return 0!==e[n]}))){for(o in i)r.o(i,o)&&(r.m[o]=i[o]);if(u)var c=u(r)}for(n&&n(t);l<s.length;l++)a=s[l],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(c)},t=self["webpackChunkuprock_spa_vue"]=self["webpackChunkuprock_spa_vue"]||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))}();var t=r.O(void 0,[998],(function(){return r(1002)}));t=r.O(t)})();
//# sourceMappingURL=app.045029a1.js.map